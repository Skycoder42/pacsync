# Maintainer: Felix Barz <skycoder42.de@gmx.de>
pkgname='%{name}'
pkgver='%{version:version}'
pkgrel='%{version:buildNumber}'
pkgdesc='%{description}'
arch=('any')
url='%{homepage}'
license=('%{license}')
depends=('pacman')
makedepends=('dart>=%{sdkVersionMin}')
source=("%{releaseUrl}")
sha256sums=('%{archiveHash}')

prepare() {
  dart pub get
}

build() {
  dart run build_runner build
  dart compile exe -o '%{executable:name}' 'bin/%{executable:path}'
}

check() {
  dart analyze --no-fatal-warnings
  dart test
}

package() {
  install -D -m755 "bin/%{executable:name}" "$pkgdir/usr/bin/%{executable:name}"
  install -D -m644 "LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
